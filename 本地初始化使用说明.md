# 本地初始化使用说明

## 🎉 功能概述

现在您可以在 `sentence_embedding_system` 目录内直接管理初始化文件，无需扫描外部目录！

## 📁 目录结构

```
sentence_embedding_system/
├── init_files/              # 本地初始化文件夹
│   ├── 示例文档.md          # 示例文档
│   ├── 技术说明.md          # 技术说明文档
│   └── [您的其他.md文件]    # 添加更多文档
├── app.py                   # 主应用程序
├── 扫描文件参考格式.md      # 详细配置说明
└── 本地初始化使用说明.md    # 本文档
```

## ⚙️ 配置说明

### 当前配置
- **自动扫描目录**: `./init_files` (本地文件夹)
- **自动构建索引**: `true` (启用)
- **支持文件格式**: `.md`, `.txt`

### 配置位置
在 <mcfile name="app.py" path="e:\My\tex\sentence_embedding_system\app.py"></mcfile> 中：
```python
AUTO_SCAN_DIRECTORY = os.environ.get('AUTO_SCAN_DIRECTORY', './init_files')
AUTO_BUILD_INDEX = os.environ.get('AUTO_BUILD_INDEX', 'true').lower() == 'true'
```

## 🚀 使用方法

### 1. 添加文档
将您的 Markdown 文件直接放入 `init_files` 文件夹：
```bash
# 复制文件到初始化文件夹
copy your_document.md init_files/
```

### 2. 重启应用
```bash
# 停止当前应用 (Ctrl+C)
# 重新启动
.\venv\Scripts\Activate.ps1
python app.py
```

### 3. 自动处理
系统会自动：
- 扫描 `init_files` 文件夹
- 提取句子并生成嵌入
- 构建搜索索引
- 启动Web服务

## 📊 测试结果

✅ **成功测试结果**：
```
INFO: 自动初始化完成：处理了 2 个文件，共 3 个句子
INFO: 开始自动构建搜索索引...
INFO: 索引构建完成，包含 3 个向量
INFO: 应用运行在 http://127.0.0.1:5000
```

## 🔧 高级配置

### 环境变量覆盖
如果需要临时使用其他目录：
```powershell
$env:AUTO_SCAN_DIRECTORY = "E:\My\tex\other_folder"
python app.py
```

### 禁用自动索引构建
```powershell
$env:AUTO_BUILD_INDEX = "false"
python app.py
```

## 📝 文件格式要求

### Markdown 文件示例
```markdown
# 标题

这是一个句子。这是另一个句子。

## 子标题

- 列表项1
- 列表项2

结论句子。
```

### 处理规则
- 自动清理 Markdown 标记
- 按句号、问号、感叹号分割句子
- 过滤短于10个字符的句子
- 支持中英文混合内容

## 🎯 优势

1. **本地管理**: 文件就在项目目录内，便于管理
2. **自动处理**: 启动时自动扫描和索引
3. **即时生效**: 添加文件后重启即可使用
4. **版本控制**: 可以将初始化文件纳入Git管理

## 🔍 验证方法

1. 访问 http://127.0.0.1:5000
2. 查看统计信息确认文件已处理
3. 使用搜索功能测试相似性检索
4. 检查日志确认处理状态

## 📚 相关文档

- <mcfile name="扫描文件参考格式.md" path="e:\My\tex\sentence_embedding_system\扫描文件参考格式.md"></mcfile> - 详细配置说明
- <mcfile name="README.md" path="e:\My\tex\sentence_embedding_system\README.md"></mcfile> - 项目总体说明

---

现在您可以方便地在本地管理初始化文件，无需依赖外部目录！